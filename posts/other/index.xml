<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Other on YuCheng's Site</title><link>https://blog.tigernaxo.com/posts/other/</link><description>Recent content in Other on YuCheng's Site</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Tue, 16 Jan 2024 08:46:00 +0800</lastBuildDate><atom:link href="https://blog.tigernaxo.com/posts/other/index.xml" rel="self" type="application/rss+xml"/><item><title>[OpenWrt] 在 linux 中使用 Docker 跑 OpenWrt</title><link>https://blog.tigernaxo.com/posts/other/openwrt-docker/</link><pubDate>Tue, 16 Jan 2024 08:46:00 +0800</pubDate><guid>https://blog.tigernaxo.com/posts/other/openwrt-docker/</guid><description>開啟網卡 promisc ip link set enp0s3 promisc on ###. 建立 docker 網路 查詢路由所在網段、遮罩、閘道器。
ip route show dev enp0s3 結果：軟路由所在網段、遮罩為 10.0.2.0/24、閘道器 10.0.2.2。
default via 10.0.2.2 proto dhcp src 10.0.2.15 metric 1024 10.0.2.0/24 proto kernel scope link src 10.0.2.15 metric 1024 10.0.2.2 proto dhcp scope link src 10.0.2.15 metric 1024 192.73.141.230 via 10.0.2.2 proto dhcp src 10.0.2.15 metric 1024 192.73.144.230 via 10.0.2.2 proto dhcp src 10.0.2.15 metric 1024 創建 docker 網路
docker network create -d macvlan \ --subnet=10.</description></item><item><title>[Tools] 使用 OpenApi Generator 產生 .Net Core Client</title><link>https://blog.tigernaxo.com/posts/other/tools-openapi-generator/</link><pubDate>Fri, 07 Apr 2023 11:00:00 +0800</pubDate><guid>https://blog.tigernaxo.com/posts/other/tools-openapi-generator/</guid><description>手動設置 需要 java 環境、npm 安裝執行檔，可參照CLI Installation
openapi-generator-cli generate \ -i &amp;lt;spec file|url&amp;gt; -o &amp;lt;outdir&amp;gt; \ # 設定輸入 json/xml (檔案或網址)、輸出資料夾 -g csharp-netcore \ # 輸出 csharp .net core 專案 --skip-validate-spec # 不檢查規格 Docker 更簡單，一行搞定：
docker run --rm \ -v ${PWD}:/local openapitools/openapi-generator-cli generate \ -i &amp;lt;spec file|url&amp;gt; -o &amp;lt;outdir&amp;gt; \ # 設定輸入 json/xml (檔案或網址)、輸出資料夾 -g csharp-netcore \ # 輸出 csharp .net core 專案 --skip-validate-spec # 不檢查規格 Reference CLI Installation Documentation for the csharp-netcore Generator</description></item><item><title>[Hugo] Toha Theme 10分鐘快速建構</title><link>https://blog.tigernaxo.com/posts/other/hugo-toha-2023/</link><pubDate>Wed, 15 Feb 2023 16:30:00 +0800</pubDate><guid>https://blog.tigernaxo.com/posts/other/hugo-toha-2023/</guid><description>環境需求： Hugo Version 0.109.0 (extended) or higher Go language 1.18 or higher (require for hugo modules) Node version v18.x or later and npm 8.x or later. git GitHub 設定 建立一個 repo 叫做 &amp;lt;GitAccount&amp;gt;.github.io，進入 repo 頁面 進入Repo -&amp;gt; Setting -&amp;gt; Code and automation -&amp;gt; Actions -&amp;gt; General -&amp;gt; Workflow permissions -&amp;gt; 勾選 Read and write permissions Repo 設定 抓 template
git clone https://github.com/hugo-toha/hugo-toha.github.io.git mv hugo-toha.github.io &amp;lt;GitAccount&amp;gt;.github.io cd &amp;lt;GitAccount&amp;gt;.github.io hugo mod tidy 設置 config.</description></item><item><title>[授權] OAuth2.0</title><link>https://blog.tigernaxo.com/posts/other/auth-oauth2/</link><pubDate>Fri, 02 Dec 2022 12:43:00 +0800</pubDate><guid>https://blog.tigernaxo.com/posts/other/auth-oauth2/</guid><description>OAuth 是一個開發標準(Open Standard)，用來處理有關「授權」（Authorization）相關的問題 允許授權當下的APP取得使用者在平台的相關資訊 OAuth2 有很多變化
腳色：
Resource Owner，也就是使用者。 Client，要向使用者取得權限的應用程式，有自己的 Client ID、 Client Secret。 Authorization Server，負責驗證使用者身分、發 Access Token 給應用程式 Resource Server，存放資源的伺服器，認 Token 給使用者存取資源 用詞
Authorization Grant 同意應用程式取得資源 Redirect URI 驗證伺服器驗證、授權完畢後，返回應用程式的路徑 Scope 授權範圍 OAuth2.0 四種授權類型流程(Grant Types)： Authorization Code 最常見，步驟：
應用程式(Client) 將使用者導向 Authorization Server，提供 Redirect URL, scope, 應用程式的 client id&amp;hellip; Authorization Server 驗證使用者身分，通過之後發給 Authorization Grant，將網址列帶上 Authorization Grant 後將使用者導回 Redirect URI 回到應用程式(Client)。 應用程式(Client)拿 Authorization Grant 和 Authorization Server 換取 Access Token，Authorization Server 會透過應用程式(Client)專屬的 Client ID、 Client Secret 驗證應用程式身分。 應用程式(Client)帶著 Access Token 向 Resource Server 存取資源 Implicit 適合在 Client-side 運行的應用程式適合使用，例如 SPA(Single Page Application) 跳過交換 Access Token 的過程，由 Authorization Server 直接給予 Access Token 比較不安全</description></item><item><title>[HA] 使用 Docker Compose 安裝 Home Assistant</title><link>https://blog.tigernaxo.com/posts/other/homeassistant/ha-install/</link><pubDate>Tue, 22 Nov 2022 08:50:00 +0800</pubDate><guid>https://blog.tigernaxo.com/posts/other/homeassistant/ha-install/</guid><description>這裡是假設手邊已經有一台安裝 docker、docker-compose 的 Linux 系統。 採用的映象檔是 ghcr.io/home-assistant/home-assistant:stable ，因為我需要使用網址來區分服務(同一個 443 port 的情況下)，所以採取反向代理的方式，一方面讓之後要部屬其他應用、加上憑證、等等操作都交給 nginx 比較方便，因此不會將 8123 port 直接對外。
建立 mynetwork docker create network mynetwork 建立 ha ha/docker-compose.yml version: &amp;#39;3&amp;#39; services: ha: container_name: homeassistant #image: &amp;#34;homeassistant/home-assistant:stable&amp;#34; image: ${HA_IMAGE} volumes: - ./volume/ha/config:/config - /etc/localtime:/etc/localtime:ro - /run/dbus:/run/dbus:ro restart: unless-stopped privileged: true networks: - mynetwork networks: mynetwork: external: true ha/.env HA_IMAGE=&amp;#34;homeassistant/home-assistant:stable&amp;#34; ha/.gitignore volume/ 建立 nginx nginx/docker-compose.yml version: &amp;#39;3&amp;#39; services: web: image: nginx volumes: # - ./templates:/etc/nginx/templates - /usr/share/nginx/html:/usr/share/nginx/html - .</description></item><item><title>[Bot] Telegram bot</title><link>https://blog.tigernaxo.com/posts/other/telegram-bot/</link><pubDate>Fri, 29 Jan 2021 23:46:00 +0800</pubDate><guid>https://blog.tigernaxo.com/posts/other/telegram-bot/</guid><description>找 @BotFather 對話打 /newbot，設定 name username，然後就會拿到 API token
Referance Github-TelegramBots/Telegram.Bot Telegram.Bot-Documentation Telegram Bot API</description></item><item><title>[Tools] 在 linux 中使用 google drive cli</title><link>https://blog.tigernaxo.com/posts/other/linux-gdrive-cli/</link><pubDate>Fri, 29 Jan 2021 23:46:00 +0800</pubDate><guid>https://blog.tigernaxo.com/posts/other/linux-gdrive-cli/</guid><description>重新編譯 gdrive 取得憑證 首先到Google API Console， 建立專案 啟動 Google Drive API。 啟用之後選擇左邊的&amp;quot;設定同意畫面&amp;quot;，填寫必要的欄位其他依照需求設置就好 建立一組 OAth2 憑證，會有 Client ID 和 Secret 編譯專案 1.安裝 Golang 2.下載 gdrive 專案 git clone git@github.com:prasmussen/gdrive.git 3.修改專案下的handlers_drive.go，把下列兩行改成拿到的 Client ID、Secret const ClientId = &amp;#34;*************************************.com&amp;#34; const ClientSecret = &amp;#34;*************&amp;#34; 4.取得需要的 golang 套件 go get github.com/prasmussen/gdrive 5.到專案資料夾下編譯，編譯完後就會有得到執行檔 go build 設定 設置環境變數 將編譯好的執行檔上傳Linux，假設放在${HOME}/gdrive-linux-x64：
# 建立${HOME}/bin $ mkdir -p ${HOME}/bin # 把gdrive-linux-x64放進去重新命名為gdrive $ mv ${HOME}/gdrive-linux-x64 ${HOME}/bin/gdrive # 賦予gdrive執行權限 $ chmod u+x ${HOME}/bin/gdrive # 如果PATH裡面找不到${HOME}/bin就新增並重新讀取環境設定 $ echo ${PATH} | grep -qE ${HOME}/bin[^/] &amp;amp;&amp;amp; \ &amp;gt; echo &amp;#34;PATH=\${HOME}/bin:\${PATH}&amp;#34; &amp;gt;&amp;gt; ~/.</description></item><item><title>[Linux] 在 Ubuntu 20.04 中設置 vim plugin YouCompleteMe</title><link>https://blog.tigernaxo.com/posts/other/vim-plugin-ycm/</link><pubDate>Wed, 18 Nov 2020 23:14:00 +0800</pubDate><guid>https://blog.tigernaxo.com/posts/other/vim-plugin-ycm/</guid><description>安裝 junegunn/vim-plug 管理套件 以指令安裝 junegunn/vim-plug
curl -fLo ~/.vim/autoload/plug.vim --create-dirs \ https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim 在 ~/.vimrc 加入 Plug &amp;lsquo;ycm-core/YouCompleteMe&amp;rsquo;
&amp;#34; Specify a directory for plugins call plug#begin(&amp;#39;~/.vim/plugged&amp;#39;) Plug &amp;#39;ycm-core/YouCompleteMe&amp;#39; &amp;#34; Initialize plugin system call plug#end() 打開 vim，在 vim 命令列輸入安裝 Plugin 的指令下載 YCM，這個時候還沒編譯所以會顯示安裝失敗
:PlugInstall 編譯YCM 安裝編譯工具
sudo apt install -y build-essential cmake vim python3-dev 編譯
~/.vim/plugged/YouCompleteMe/install.py 測試 打開 vim 確認，完工~
Reference GitHub - ycm-core/YouCompleteMe GitHub - junegunn/vim-plug</description></item><item><title>[台灣杉] 一鍵登入國網中心台灣杉(Taiwania)</title><link>https://blog.tigernaxo.com/posts/other/taiwania_login_oneclick/</link><pubDate>Wed, 23 Jan 2019 09:37:18 +0800</pubDate><guid>https://blog.tigernaxo.com/posts/other/taiwania_login_oneclick/</guid><description>台灣杉(Taiwania)是國網中心2018年啟用的超級電腦，登入時密碼必須附加OTP (One-time Password)，國網中心建議取得OTP的方式是從驗證器取得OTP密碼，但這樣的方式每次都需要打開驗證器(手機、chrome插件… etc)，並且需要手動輸入OTP，下面分享我從Windows以及Linux環境下登入台灣杉所使用的一鍵登入方式。
OTP的演算法可粗分為HOTP (HMAC-based OTP)；以及基於HOTP的TOTP (Time-based OTP)，我們不必瞭解演算法細節，只需知道台灣杉採用Base32編碼作為TOTP金鑰(Secret)，時間間格為30秒，每30秒可以根據”Secret”與”當前時間區間”以sha1演算法生成一次性密碼(OTP，或稱為Key)，由於這是單向加密的過程所以無法用時間區間與Key逆推Secret，並且OTP在成功使用一次之後就會被伺服器廢棄，以確保安全性。
注意事項 校時
由於TOTP演算法依據當前時間區間產生OTP，如果作業系統的時間不正確則會產生錯誤的OTP，在Windows環境之下可以到國家時間與頻率標準實驗室的網頁下載NTP校時軟體，以管理員身分執行進行校時；Linux環境可以用下述指令更新時間並寫入BIOS： # 從NTP時間伺服器進行網路校時 sudo ntpdate time.stdtime.gov.tw # 將更新的時間寫入BIOS sudo hwclock -w 所有登入行為之間必須間隔30秒(包含使用winSCP、putty或從Linux直接登入)。 每個30秒區間會產生一個OTP，而該OTP一旦經過使用就會被伺服器廢棄而無法再用。我曾經連續登入以為程式壞了，但核對iService上面產生的密碼又是一樣的，後來才發現這件事…中間還因為連登失敗太頻繁還被鎖，因此記得間隔30秒以上再登入。 Linux要登入台灣衫需要將台灣衫加入know host，以生醫節點為例: ssh-keyscan 140.110.148.14 1&amp;gt;&amp;gt;~/.ssh/known_hosts 2&amp;gt;/dev/null 從Windows登入台灣杉 前置工作 安裝Go，並設置GOPATH。 安裝putty。 安裝WinSCP。 知道怎麼打開windows的命令提示字元 (WIN+R、鍵入cmd、enter)。 編譯TOTP產生器 取得TOTP套件
go get github.com/pquerna/otp/totp 撰寫程式碼main.go
package main import ( &amp;#34;fmt&amp;#34; &amp;#34;github.com/pquerna/otp/totp&amp;#34; &amp;#34;os&amp;#34; &amp;#34;time&amp;#34; ) func main() { secret := os.Args[1] code, _ := totp.GenerateCode(secret, time.Now().UTC()) fmt.Print(code) } 編譯
go build -o taiwaniaOTP.exe main.</description></item></channel></rss>