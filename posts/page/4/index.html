<!doctype html><html lang=en><head><title>Posts</title><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><link rel=stylesheet href=/application.2fc4cfe7d8e612ccc7ee98a8da8d6b5485d943580b9dd3d034d648b7c254977a.css integrity="sha256-L8TP59jmEszH7pio2o1rVIXZQ1gLndPQNNZIt8JUl3o="><link rel=alternate type=application/rss+xml href=https://blog.tigernaxo.com/posts/index.xml title="YuCheng's Site"><meta property="og:title" content="YuCheng's Site"><meta property="og:type" content="website"><meta property="og:description" content="Portfolio and personal blog of Yu Cheng."><meta property="og:image" content="/images/author/peter.png"><meta property="og:url" content="https://blog.tigernaxo.com/"><script integrity="sha256-DO4ugzEwhTW1Id1UIWn0gUJWaebCYOypeTit6LW4QB4=">let theme=localStorage.getItem("theme-scheme")||localStorage.getItem("darkmode:color-scheme")||"light";theme==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?theme="dark":theme="light"),document.documentElement.setAttribute("data-theme",theme)</script></head><body class="type-posts kind-section" data-bs-spy=scroll data-bs-target=#TableOfContents data-bs-offset=80><div class="container-fluid bg-secondary wrapper"><nav class="navbar navbar-expand-xl top-navbar shadow" id=top-navbar><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button>
<i data-feather=sidebar></i>
</button>
<a class=navbar-brand href=/>YuCheng's Site</a>
<button class="navbar-toggler navbar-light" id=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#top-nav-items aria-label=menu>
<i data-feather=menu></i></button><div class="collapse navbar-collapse dynamic-navbar" id=top-nav-items><ul class="nav navbar-nav ms-auto"><li class=nav-item><a class=nav-link href=/#home>Home</a></li><li class=nav-item><a class=nav-link href=/#about>About</a></li><li class=nav-item><a class=nav-link href=/#skills>Skills</a></li><li class=nav-item><a class=nav-link href=/#experiences>Experiences</a></li><li class=nav-item><a class=nav-link href=/#education>Education</a></li><div id=top-navbar-divider></div><li class=nav-item><a class=nav-link id=blog-link href=/posts>Posts</a></li></ul></div></div></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts data-filter=all>Posts</a></li><div class=subtree><li><i data-feather=plus-circle></i><a class=list-link href=/posts/database/> [DB] Database</a><ul><li><a class=list-link href=/posts/database/sql-cte/ title="[SQL] CTE">[SQL] CTE</a></li><li><a class=list-link href=/posts/database/sql-merge/ title="[SQL] Merge">[SQL] Merge</a></li><li><a class=list-link href=/posts/database/sql-ranking/ title="[SQL] Ranking">[SQL] Ranking</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/linux/> [OS] Linux</a><ul><li><a class=list-link href=/posts/linux/arch-install/ title="[Arch] 安裝(Virtualbox)">[Arch] 安裝(Virtualbox)</a></li><li><a class=list-link href=/posts/linux/centos8-static-ip/ title="[CentOS] 設定網路靜態IP">[CentOS] 設定網路靜態IP</a></li><li><a class=list-link href=/posts/linux/ubuntu22-ssh/ title="[Ubuntu] SSH 連線">[Ubuntu] SSH 連線</a></li><li><a class=list-link href=/posts/linux/ubuntu204-static-ip/ title="[Ubuntu] 設定網路靜態IP">[Ubuntu] 設定網路靜態IP</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/secure/> [Secure] 安全性議題</a><ul><li><a class=list-link href=/posts/secure/oauth2-01protocol/ title="[授權] OAuth 2.0 簡介">[授權] OAuth 2.0 簡介</a></li><li><a class=list-link href=/posts/secure/oauth2-02grants/ title="[授權] OAuth 2.0 授權許可">[授權] OAuth 2.0 授權許可</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/web/> [Web] Web 相關</a><ul><li><a class=list-link href=/posts/web/keycloak-docker-compose/ title="[Keycloak] docker 安裝">[Keycloak] docker 安裝</a></li><li><a class=list-link href=/posts/web/web-tool-eudc-frontforge/eudc/ title="[Web] FontForge 造難字">[Web] FontForge 造難字</a></li><li><a class=list-link href=/posts/web/web-api-design/ title="[Web] 敏感性 GET 參數">[Web] 敏感性 GET 參數</a></li><li><a class=list-link href=/posts/web/security-get/ title="[Web] 敏感性 GET 參數">[Web] 敏感性 GET 參數</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/javascript/> [前端] Javascript</a><ul><li><a class=list-link href=/posts/javascript/js-arr-func/ title="[JS] Array 常用方法">[JS] Array 常用方法</a></li><li><a class=list-link href=/posts/javascript/js-obj-func/ title="[JS] Object 常用方法">[JS] Object 常用方法</a></li><li><a class=list-link href=/posts/javascript/js-module/ title="[JS] 各種模組(module)">[JS] 各種模組(module)</a></li><li><a class=list-link href=/posts/javascript/js-hoisting/ title="[JS] 提升與暫時性死區">[JS] 提升與暫時性死區</a></li><li><a class=list-link href=/posts/javascript/js-async/ title="[JS] 非同步程式設計">[JS] 非同步程式設計</a></li><li><a class=list-link href=/posts/javascript/js-prototype/ title=[JS]原型繼承鏈模型>[JS]原型繼承鏈模型</a></li><li><a class=list-link href=/posts/javascript/code-roc-format/ title="[Code] 格式化民國年">[Code] 格式化民國年</a></li><li><a class=list-link href=/posts/javascript/code-copy-html-content/ title="[Code] 複製元件內的文字">[Code] 複製元件內的文字</a></li><li><a class=list-link href=/posts/javascript/diy-simple-router/ title="[DIY] 前端路由">[DIY] 前端路由</a></li><li><a class=list-link href=/posts/javascript/diy-http-proxy-middleware/ title="[DIY] 開發 proxy">[DIY] 開發 proxy</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/typescript/> [前端] Typescript</a><ul><li><a class=list-link href=/posts/typescript/ts-extend-global-obj/ title="[TS] 擴充標準內建物件">[TS] 擴充標準內建物件</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/frontend-vue/> [前端] Vue</a><ul><li><a class=list-link href=/posts/frontend-vue/vue-router_add_query/ title="[Router] Navigation Guard 加入查詢參數">[Router] Navigation Guard 加入查詢參數</a></li><li><a class=list-link href=/posts/frontend-vue/vue-ts-provide/ title="[TS] TS-Provide">[TS] TS-Provide</a></li><li><a class=list-link href=/posts/frontend-vue/vue-comp-yncheckbox/ title="[元件] CheckBox">[元件] CheckBox</a></li><li><a class=list-link href=/posts/frontend-vue/vue-comp-promise/ title="[元件] Promise 元件方法">[元件] Promise 元件方法</a></li><li><a class=list-link href=/posts/frontend-vue/vue-comp-wrapper/ title="[元件] Transparent Wrapper">[元件] Transparent Wrapper</a></li><li><a class=list-link href=/posts/frontend-vue/vue-ts-bug/ title="[元件] TypeScript 注意事項">[元件] TypeScript 注意事項</a></li><li><a class=list-link href=/posts/frontend-vue/vue-comp-global/ title="[元件] 全域元件">[元件] 全域元件</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/dotnet/> [後端] .NET</a><ul><li><a class=list-link href=/posts/dotnet/startup-webapi/ title="[.NET] .NET 6 Web API 專案">[.NET] .NET 6 Web API 專案</a></li><li><a class=list-link href=/posts/dotnet/pdf-print/ title="[.NET] PDF 列印">[.NET] PDF 列印</a></li><li><a class=list-link href=/posts/dotnet/webview2-single-file/ title="[.NET] WebView2 單檔部屬">[.NET] WebView2 單檔部屬</a></li><li><a class=list-link href=/posts/dotnet/nuget/ title="[.NET] 製作 Nuget package">[.NET] 製作 Nuget package</a></li><li><a class=list-link href=/posts/dotnet/secret/ title="[.NET] 開發階段專案敏感資料">[.NET] 開發階段專案敏感資料</a></li><li><a class=list-link href=/posts/dotnet/snippet-json-dt/ title="[Snippet] DataTable轉Json">[Snippet] DataTable轉Json</a></li><li><a class=list-link href=/posts/dotnet/snippet-json-operate/ title="[Snippet] JsonElement 操作">[Snippet] JsonElement 操作</a></li><li><a class=list-link href=/posts/dotnet/deploy-ubuntu2004-nginx/ubuntu2004_nginx/ title="[部屬手動] Ubuntu Nginx">[部屬手動] Ubuntu Nginx</a></li><li><a class=list-link href=/posts/dotnet/basic-async-controller/ title="[基礎] 非同步控制器">[基礎] 非同步控制器</a></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/dotnet/startup-auth/> [練習] 認證與授權</a><ul><li><a class=list-link href=/posts/dotnet/startup-auth/auth_guild_1/ title="[驗證與授權] 驗證與授權">[驗證與授權] 驗證與授權</a></li><li><a class=list-link href=/posts/dotnet/startup-auth/auth_guild_2/ title="[驗證與授權] 驗證設定">[驗證與授權] 驗證設定</a></li><li><a class=list-link href=/posts/dotnet/startup-auth/auth_guild_3/ title="[驗證與授權] 驗證實例">[驗證與授權] 驗證實例</a></li><li><a class=list-link href=/posts/dotnet/startup-auth/auth_guild_4/ title="[驗證與授權] 授權設定">[驗證與授權] 授權設定</a></li><li><a class=list-link href=/posts/dotnet/startup-auth/auth_guild_memo/ title="[驗證與授權] 備註頁面">[驗證與授權] 備註頁面</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/dotnet/startup-signalr/> [練習] 即時聊天專案</a><ul><li><a class=list-link href=/posts/dotnet/startup-signalr/guild_1_start/ title="[SignalR] 建立專案">[SignalR] 建立專案</a></li><li><a class=list-link href=/posts/dotnet/startup-signalr/guild_2_issue_token/ title="[SignalR] 後端 Token 授權">[SignalR] 後端 Token 授權</a></li><li><a class=list-link href=/posts/dotnet/startup-signalr/guild_4_front_end_login/ title="[SignalR] 前端登入頁面">[SignalR] 前端登入頁面</a></li><li><a class=list-link href=/posts/dotnet/startup-signalr/guild_3_validate_token/ title="[SignalR] 後端 Token 認證">[SignalR] 後端 Token 認證</a></li></ul></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/csharp/> [後端] csharp</a><ul><li><a class=list-link href=/posts/csharp/async/ title="[Code] 處理民國年">[Code] 處理民國年</a></li><li><a class=list-link href=/posts/csharp/cultureinfo/ title="[Code] 處理民國年">[Code] 處理民國年</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/software/> [系統] 軟體設計</a><ul><li><a class=list-link href=/posts/software/arch-multi-layer/ title="[架構] 多層(layer)架構">[架構] 多層(layer)架構</a></li><li><a class=list-link href=/posts/software/arch-n-tier/ title="[架構] 多層(tier)架構">[架構] 多層(tier)架構</a></li><li><a class=list-link href=/posts/software/arch-clean-arch-review/ title="[架構] 無暇的程式碼">[架構] 無暇的程式碼</a></li><li><a class=list-link href=/posts/software/quality-nest/ title="[程式] 巢狀結構">[程式] 巢狀結構</a></li><li><a class=list-link href=/posts/software/pg-method-chaining/ title="[程設] 鏈式語法比較">[程設] 鏈式語法比較</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/container/> [維運] Container 基礎</a><ul><li><a class=list-link href=/posts/container/basic-resource/ title="[Basic] 學習資源">[Basic] 學習資源</a></li><li><a class=list-link href=/posts/container/docker-command/ title="[Docker] 基礎指令">[Docker] 基礎指令</a></li><li><a class=list-link href=/posts/container/docker-install/ title="[Docker] 安裝">[Docker] 安裝</a></li><li><a class=list-link href=/posts/container/k8s-example-tnsnames.ora/ title="[K8s] 共享 tnsnames.ora">[K8s] 共享 tnsnames.ora</a></li><li><a class=list-link href=/posts/container/k8s-basc-install/ title="[K8S] 自架 K8S 腳本">[K8S] 自架 K8S 腳本</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/devops/> [維運] DevOps</a><ul><li><a class=list-link href=/posts/devops/git-orphan-worktree/ title="[Git] orphan branch/worktree">[Git] orphan branch/worktree</a></li><li><a class=list-link href=/posts/devops/git-action-release-dotnet/ title="[Git] Release Action (Dotnet)">[Git] Release Action (Dotnet)</a></li><li><a class=list-link href=/posts/devops/git-action-release-vue/ title="[Git] Release Action (Vue)">[Git] Release Action (Vue)</a></li><li><a class=list-link href=/posts/devops/k8s-debian-kubeadm/ title="[K8S] K8S 安裝">[K8S] K8S 安裝</a></li><li><a class=list-link href=/posts/devops/sonarqube_netcore31/ title="[SonarQube] 安裝與.NET 檢測">[SonarQube] 安裝與.NET 檢測</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/fhir/> [HIS] FHIR</a><ul><li><a class=list-link href=/posts/fhir/fhir-smart-overview/ title="[SMART] Overview">[SMART] Overview</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/other/> [其他] Other</a><ul><li><i data-feather=plus-circle></i><a class=list-link href=/posts/other/homeassistant/> [智能家居] Home Assistant</a><ul><li><a class=list-link href=/posts/other/homeassistant/ha-install/ title="[安裝] Home Assistant 安裝">[安裝] Home Assistant 安裝</a></li></ul></li><li><a class=list-link href=/posts/other/telegram-bot/ title="[Bot] Telegram Bot">[Bot] Telegram Bot</a></li><li><a class=list-link href=/posts/other/taiwania_login_oneclick/ title="[DIY] 一鍵登入台灣杉">[DIY] 一鍵登入台灣杉</a></li><li><a class=list-link href=/posts/other/hugo-toha-2023/ title="[Hugo] Toha Theme">[Hugo] Toha Theme</a></li><li><a class=list-link href=/posts/other/openwrt-docker/ title="[OpenWrt] Docker">[OpenWrt] Docker</a></li><li><a class=list-link href=/posts/other/linux-gdrive-cli/ title="[工具] Gdrive CLI / Linux">[工具] Gdrive CLI / Linux</a></li><li><a class=list-link href=/posts/other/tools-openapi-generator/ title="[工具] openapi generator">[工具] openapi generator</a></li><li><a class=list-link href=/posts/other/vim-plugin-ycm/ title="[工具] Vim Plugin YCM">[工具] Vim Plugin YCM</a></li><li><a class=list-link href=/posts/other/auth-oauth2/ title="[授權] OAuth2.0">[授權] OAuth2.0</a></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class="content container-fluid" id=content><div class="container-fluid post-card-holder" id=post-card-holder><div class=post-card><div class=card><div class=card-head><a href=/posts/web/security-get/ class=post-card-link><img class=card-img-top src=/images/default-hero.jpg alt="Hero Image"></a></div><div class=card-body><a href=/posts/web/security-get/ class=post-card-link><h5 class=card-title>[Web] RESTful 敏感性 GET 參數</h5><p class="card-text post-summary">網址列參數洩漏風險 目前網頁後端資源存取大多以 RESTful Api 開發， REST 標準下 API 的設計需符合冪等性(idempotent)， SSL 連線連接 TCP 層與 HTTP 層，因此透過 HTTPS 傳輸的網頁，網址進入 TCP 層之後是被加密的， 即使封包被截取也只能看見要傳送的目標主機 那麼敏感性資料可以透過 GET 參數傳送嗎？
如果將機敏性資料夾帶於網址列當中會有洩漏的安全性風險，諸如：
被 Shoulder surfers 竊取。(你的螢幕被偷看) 隨著頁面列印被印出。 使用者將連結加入書籤。 儲存在瀏覽器瀏覽歷史紀錄。 被記錄在 Web Server 的 Log，而 Log 本身可能不安全。 隱藏 RESTful GET 參數 因此避免這些資料外洩的可能，根本的做法就是讓機敏性資料從網址列消失，最好的做法是依據 OWASP 的建議把 參數夾帶在 Header 裡面，其他手段整理：
將機敏性資料加密，但加密也會破壞 API RESTful 特性，在後端需要先解密無法直接對應回物件。 以 POST 的一部份傳輸(透過 HTTPS)，但會直接破壞 API 的 RESTful 特性。 根據 OWASP REST Security Cheat Sheet，應該把敏感性參數夾帶在 GET 請求的 HTTP Header 裡面透過 HTTPS 傳輸。 P.S. OWASP 的 Cheat Sheet 可看出並非所有資料都要不能出現在網址列，只有機敏性資料才需要考慮從網址列移除。`</p></a></div><div class=card-footer><span class=float-start>Monday, July 11, 2022
</span><a href=/posts/web/security-get/ class="float-end btn btn-outline-info btn-sm">Read</a></div></div></div><div class=post-card><div class=card><div class=card-head><a href=/posts/database/sql-ranking/ class=post-card-link><img class=card-img-top src=/images/default-hero.jpg alt="Hero Image"></a></div><div class=card-body><a href=/posts/database/sql-ranking/ class=post-card-link><h5 class=card-title>[SQL] Ranking</h5><p class="card-text post-summary">先建立一個練習表格：
CREATE TABLE Department ( id SERIAL PRIMARY KEY, name VARCHAR NOT NULL ); CREATE TABLE Employee ( id SERIAL PRIMARY KEY, name VARCHAR NOT NULL, salary INT, dep_id INT, ); INSERT INTO Employee(name, salary, dep_id) VALUES ('Mandy', 45000, 2); INSERT INTO Employee(name, salary, dep_id) VALUES ('Emily', 43000, 1); INSERT INTO Employee(name, salary, dep_id) VALUES ('Sylvia', 26000, 2); INSERT INTO Employee(name, salary, dep_id) VALUES ('Eva', 48000, 3); INSERT INTO Employee(name, salary, dep_id) VALUES ('Sandra', 33000, 3); INSERT INTO Employee(name, salary, dep_id) VALUES ('Lily', 28000, 2); INSERT INTO Employee(name, salary, dep_id) VALUES ('April', 50000, 1); INSERT INTO Employee(name, salary, dep_id) VALUES ('Cindy', 43000, 1); INSERT INTO Employee(name, salary, dep_id) VALUES ('Kay', 40000, 3); INSERT INTO Department(name) VALUES ('IT'); INSERT INTO Department(name) VALUES ('RD'); INSERT INTO Department(name) VALUES ('QA'); 資料排序 直接用 ORDER BY 無法得到秩(排名)</p></a></div><div class=card-footer><span class=float-start>Friday, June 17, 2022
</span><a href=/posts/database/sql-ranking/ class="float-end btn btn-outline-info btn-sm">Read</a></div></div></div><div class=post-card><div class=card><div class=card-head><a href=/posts/database/sql-merge/ class=post-card-link><img class=card-img-top src=/images/default-hero.jpg alt="Hero Image"></a></div><div class=card-body><a href=/posts/database/sql-merge/ class=post-card-link><h5 class=card-title>[SQL] MERGE</h5><p class="card-text post-summary">一段神奇的語法，可以指定對舊資料、新的資料分別進行不同的動作(通常是更新、新增)， 不指定的話預設是 BY TARGET， 動作目標都是 TARGET。
在更新清單的時候特別好用。
MERGE INTO TABLE1 DEST -- 目標表格 USING( SELECT :K1 K1, :K2 K2, :K3 K3, :K4 K4, FROM DUAL) SRC ON( DEST.K1 = SRC.K1 AND DEST.K2 = SRC.K2 AND DEST.K4 = SRC.K4 ) -- TARGET 有，SOURCE 沒有，更新 TARGET 裡面的紀錄 WHEN MATCHED THEN UPDATE SET F1 = SRC.F1, F2 = SRC.F2, -- TARGET 沒有，SOURCE 有，SOURCE 新增到 TARGET WHEN NOT MATCHED THEN INSERT ( K1, K2, K4, K3, F1, F2 ) VALUES ( :K1, :K2, :K4, :K3, :F1, :F2) Reference [StackOverflow] Performing MERGE with Dapper.net</p></a></div><div class=card-footer><span class=float-start>Tuesday, June 14, 2022
</span><a href=/posts/database/sql-merge/ class="float-end btn btn-outline-info btn-sm">Read</a></div></div></div><div class=post-card><div class=card><div class=card-head><a href=/posts/container/basic-resource/ class=post-card-link><img class=card-img-top src=/images/default-hero.jpg alt="Hero Image"></a></div><div class=card-body><a href=/posts/container/basic-resource/ class=post-card-link><h5 class=card-title>[Container] 學習資源</h5><p class="card-text post-summary">DockerHub Docker文件 K8S</p></a></div><div class=card-footer><span class=float-start>Monday, April 25, 2022
</span><a href=/posts/container/basic-resource/ class="float-end btn btn-outline-info btn-sm">Read</a></div></div></div><div class=post-card><div class=card><div class=card-head><a href=/posts/container/docker-command/ class=post-card-link><img class=card-img-top src=/images/default-hero.jpg alt="Hero Image"></a></div><div class=card-body><a href=/posts/container/docker-command/ class=post-card-link><h5 class=card-title>[Docker] Docker Basic Command</h5><p class="card-text post-summary">執行容器
docker run [image] [overwrite defalut commain] 列出正在執行的容器， &ndash;all 可以列出曾經執行過的容器
docker ps [--all] docker run
docker ps --all
docker create
docker start (what different from docker run?)
docker system prune
docker logs
docker stop (send sigterm) 10s then docker kill
docker kill
docker build -t &lt;dockerid>/&lt;project>:latest .
docker exec -it &lt;containerId> /bin/bash (i, t stands for?)
# execute new command build context! port mapping 是為了處理 into docker，docker 出來從來沒有被限制
Docker Compose 所有的 docker-compose 都要在 yml 資料夾下作用 可啟動多個 Contailner 並連接 Container 之間的網路 docker-compose.yml docker-compose up docker-compose up -d # start container in the background docker-compose up &ndash;build docker-compose down docker-compose ps (需要 yml ，因此要在 yml 所在的資料夾下才能下) network service</p></a></div><div class=card-footer><span class=float-start>Monday, April 25, 2022
</span><a href=/posts/container/docker-command/ class="float-end btn btn-outline-info btn-sm">Read</a></div></div></div><div class=post-card><div class=card><div class=card-head><a href=/posts/database/sql-cte/ class=post-card-link><img class=card-img-top src=/images/default-hero.jpg alt="Hero Image"></a></div><div class=card-body><a href=/posts/database/sql-cte/ class=post-card-link><h5 class=card-title>[SQL] 用 CTE (Common Table Expression) 達成遞迴查詢，建立 MenuTree</h5><p class="card-text post-summary">建立一個暫存表 testCTE，並暫存查詢語句(所有資料)的結果 MSSQL CTE 名稱前不需加上 RECURSEIVE 關鍵字，必須使用 UNION ALL PostgreSQL：CTE 名稱前需加上 RECURSIVE 關鍵字，可用 UNION 或 UNION ALL
WITH CTE (id, name, parentId, lvl) AS ( -- 取得第一層的資料(Anchor member)(假設沒有 parentId 的是第一層) SELECT id, name parentId, 0 AS lvl FROM menus WHERE parentId IS NULL UNION ALL -- 遞迴取得 Recursive member ( SELECT A.id, A.name, A.parentId, B.lvl + 1 AS lvl FROM menus A INNER JOIN CTE B on A.parentIdi = B.d ) ) SELECT * FROM CTE WHERE id=1 ORDER BY LEVEL Reference [StackOverflow] How to create a query from a menu tree using RECURSIVE CTE? [SQL] 使用 CTE 遞迴查詢 (PostgreSQL / MSSQL)</p></a></div><div class=card-footer><span class=float-start>Monday, April 25, 2022
</span><a href=/posts/database/sql-cte/ class="float-end btn btn-outline-info btn-sm">Read</a></div></div></div><div class=post-card><div class=card><div class=card-head><a href=/posts/devops/pipeline/01_install_jenkins/ class=post-card-link><img class=card-img-top src=/images/default-hero.jpg alt="Hero Image"></a></div><div class=card-body><a href=/posts/devops/pipeline/01_install_jenkins/ class=post-card-link><h5 class=card-title>[DevOps] CI/CD-01 安裝 Jenkins</h5><p class="card-text post-summary">環境 硬體部分官方提到: RAM > 256NB，最好 2GB，空間留至少 10GB 放置 Docker 映像檔。 環境部分需要安裝 Java (8 或 11) 和 Docker
安裝 Docker # 卸載舊的 docker sudo apt-get remove -y docker docker-engine docker.io containerd runc # 安裝必要的套件 # apt-transport-https 讓套件管理程式可以透過 https 協定使用 repo sudo apt-get update sudo apt-get install -y \ apt-transport-https \ ca-certificates \ curl \ gnupg \ lsb-release # 添加 Docker 官方 GPG key curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg # 設置 stable 版本的 docker repository echo \ "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \ $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null # 安裝 Docker Engine sudo apt-get update sudo apt-get install -y docker-ce docker-ce-cli containerd.io # 下載測試 image 並執行，預期會得到輸出然後 container 就會結束 sudo docker run hello-world 執行 Jenkins 接著執行 Jenkins image，取得首次登入密碼</p></a></div><div class=card-footer><span class=float-start>Monday, October 18, 2021
</span><a href=/posts/devops/pipeline/01_install_jenkins/ class="float-end btn btn-outline-info btn-sm">Read</a></div></div></div><div class=post-card><div class=card><div class=card-head><a href=/posts/devops/sonarqube_netcore31/ class=post-card-link><img class=card-img-top src=/images/default-hero.jpg alt="Hero Image"></a></div><div class=card-body><a href=/posts/devops/sonarqube_netcore31/ class=post-card-link><h5 class=card-title>[Security] 利用免費開源資安檢測軟體 SonarQube 檢測 .NET Core 程式碼</h5><p class="card-text post-summary">弱點掃描時常使用 owasp top 10 作為報告， 然而 owasp 軟體一年要價不菲，委外掃一次也是非常貴， 使用免費的 SonarQube 將弱點掃描整合到 CI/CD 階段， 要交付前再花錢委外掃一次似乎是個折衷的作法，避免一次檢測出來的弱點過多改動過大。
SonarQube 分為兩個部分 SonarQube Server、Scanner (Client 端程式)。 Scanner 負責進行掃描並將結果上傳 Server， 而 Server 作為負責處理和儲存分析報告的 compute engine 會分析上傳的結果， 並提供 Web 使用者介面、搜尋功能，因此分析完成後就可以直接在 Web 上查看報告， Scanner 除了能夠在 locale 端使用，還能直接整合到 CI/CD Server 上進行程式碼品質掃描。 雖說可以拿 localhost 直接作為 Server 使用， 這裡還是紀錄如何在虛擬機器上實際安裝 SonarQube， 以後在實際機器上安裝就可以作為參考，
準備 Linux Server 硬體 個人使用或小規模的團隊在一台機器上安裝就足夠使用了， 如果需要架設提供大量服務的伺服器，官網也提供 Cluster 的安裝方式方便做 Loading Balance。
這裡紀錄在一台 Ubuntu 20.04 上架設。 關於 Linux 安裝過程在這裡不加贅述， 官方提到硬體有幾個注意事項，對現代的硬體來說其實都還好，比較要注意的是硬碟空間：
RAM 至少要 2G；free RAM 至少要 1G (所以用 Windows server 就要準備大很多喔)。 上傳報告需要一定的空間，因次對硬碟的空間與效能有一定的要求，不夠的話容易太慢。 server side 不支援 32-bit 作業系統；但 Scanner 可以支援 32-bit systems。 安裝 OpenJDK 11 sudo apt update sudo apt upgrade sudo apt install openjdk-11-jdk # 確認 java 版本 java --version 然後在 .bashrc 裡面把 Java 添加到 PATH 變數上。</p></a></div><div class=card-footer><span class=float-start>Wednesday, September 22, 2021
</span><a href=/posts/devops/sonarqube_netcore31/ class="float-end btn btn-outline-info btn-sm">Read</a></div></div></div><div class=post-card><div class=card><div class=card-head><a href=/posts/web/web-tool-eudc-frontforge/eudc/ class=post-card-link><img class=card-img-top src=/images/default-hero.jpg alt="Hero Image"></a></div><div class=card-body><a href=/posts/web/web-tool-eudc-frontforge/eudc/ class=post-card-link><h5 class=card-title>[Web] 把電腦的難字造字檔用 FontForge 轉為字型放到網頁上使用</h5><p class="card-text post-summary">Web 在顯示姓名的時候常會遇到中文難字無法顯示， 此時開發者在本機端如果有安裝造字檔 EUDC.TTE 就可以轉為 woff、woff2、ttf 讓網頁正確顯示難字。 過程需要字型工具軟體 FontForge， 步驟如下：
拿到造字檔 EUDC.TTE 用 cmd 打開 regedit (win10 搜尋圖示點下後，輸入 cmd，出現小黑窗後再輸入 regedit) 找到機碼 HKEY_CURRENT_USER -> EUDC -> 950 資料夾下的 SystemDefaultEUDCFont 設定檔。 從設定檔的值就是 EUDC 的存放位址取出 EUDC.tte，我這裡是 C:\CIBEN\EUDC.tte 安裝 FontForge，找到 fontforge.exe 的位址 (注意，跟桌面捷徑呼叫的執行檔不一樣！)，我的是在 C:/Program Files (x86)/FontForgeBuilds/bin/fontforge.exe 建立一個轉檔腳本 tte-extract.pe，內容如下 # Open EUDC TTE
Open("EUDC.tte", 4)
# CHANGE TTFNAME 2 EUDC SetTTFName(0x409,1,"EUDC")
SetTTFName(0x409,2,"EUDC")
SetTTFName(0x409,3,"EUDC")
SetTTFName(0x409,4,"EUDC")
SetTTFName(0x404,1,"EUDC")
SetTTFName(0x404,2,"EUDC")
SetTTFName(0x409,3,"")
SetTTFName(0x404,4,"EUDC")
SetFontNames("EUDC", "EUDC", "EUDC", "Regular", "655", "1.0.0")
Generate("EUDC.ttf")
Generate("EUDC.woff")
Generate("EUDC.woff2")
Close() 把 EUDC.tte、tte-extract放在同一個位址，在該目錄下用指令執行轉檔 (fontforge.exe 的位址可能需要修改)： C:/Program\ Files\ \(x86\)/FontForgeBuilds/bin/fontforge.exe -script tte-extract.pe 得到的 woff、woff2、ttf 用 css 設定為網頁字形： 設定網頁字形 font-family: "EUDC";
font-style: normal;
src: url('./fonts/EUDC.woff2') format('woff2'),
url('./fonts/EUDC.woff') format('woff'),
url('./fonts/EUDC.ttf') format('truetype');
} 套用網頁字形 -webkit-font-smoothing: antialiased;
-moz-osx-font-smoothing: grayscale;
font-family: '其他優先使用的字型', 'EUDC', sans-serif;
font-display: auto;
} 其他：讓 RDLC 可顯示字造難字 windows ttf 丟到 C:\Windows\Fonts，可能要重啟 IDE 才抓得到字型。 report 裡面的字型選擇 EUDC</p></a></div><div class=card-footer><span class=float-start>Tuesday, August 24, 2021
</span><a href=/posts/web/web-tool-eudc-frontforge/eudc/ class="float-end btn btn-outline-info btn-sm">Read</a></div></div></div><div class=post-card><div class=card><div class=card-head><a href=/posts/frontend-vue/vue-router_add_query/ class=post-card-link><img class=card-img-top src=/images/default-hero.jpg alt="Hero Image"></a></div><div class=card-body><a href=/posts/frontend-vue/vue-router_add_query/ class=post-card-link><h5 class=card-title>[DIY] Vue Router 使用 Navigation Guard 加入查詢參數</h5><p class="card-text post-summary">工作上需要把每一個路由都加上同一個 query string 第一直覺就是直接寫成這樣：
router.beforeEach(async (to, from, next) => { next({ path: path, query: {...to.queryl ,token: tokenStr} }) }) 結果卻跳出 Maximum call stack size exceeded 的錯誤，判斷程式出現無窮迴圈：
runtime.js?96cf:285 Uncaught (in promise) RangeError: Maximum call stack size exceeded 第一個反應是傻眼貓咪，為什麼 next() 不傳入參數的時候不會出現無窮迴圈，但塞進參數就會， 難道說 next() 在傳入參數與不傳入參數的行為並不相同！！ 因此去翻閱官網對 next() 的說明：
next: Function: this function must be called to resolve the hook. The action depends on the arguments provided to next:
next(): move on to the next hook in the pipeline. If no hooks are left, the navigation is confirmed.</p></a></div><div class=card-footer><span class=float-start>Thursday, August 19, 2021
</span><a href=/posts/frontend-vue/vue-router_add_query/ class="float-end btn btn-outline-info btn-sm">Read</a></div></div></div><div class=post-card><div class=card><div class=card-head><a href=/posts/dotnet/deploy-ubuntu2004-nginx/ubuntu2004_nginx/ class=post-card-link><img class=card-img-top src=/images/default-hero.jpg alt="Hero Image"></a></div><div class=card-body><a href=/posts/dotnet/deploy-ubuntu2004-nginx/ubuntu2004_nginx/ class=post-card-link><h5 class=card-title>[.NET Core] 在 Ubuntu 20.04 上部署 .NET (使用 Nginx 反向代理)</h5><p class="card-text post-summary">設置 Ubuntu 安裝 .NET Core Runtime wget https://packages.microsoft.com/config/ubuntu/20.04/packages-microsoft-prod.deb sudo dpkg -i packages-microsoft-prod.deb sudo apt update sudo apt install apt-transport-https sudo apt install dotnet-runtime-3.1 安裝 Nginx 新增套件來源，新增檔案 /etc/apt/sources.list.d/nginx.list
#/etc/apt/sources.list.d/nginx.list. deb https://nginx.org/packages/ubuntu/ focal nginx deb-src https://nginx.org/packages/ubuntu/ focal nginx 安裝
sudo apt update sudo apt install nginx -y 啟動、設定開機啟動
# 啟動 nginx sudo systemctl start nginx # 設置 nginx 開機啟動 sudo systemctl enable nginx # 確認 nginx 運行狀態 sudo systemctl status nginx 設置 Nginx 反向代理本機的 5000 連接埠(之後 Kestrel 的 http 服務端口)</p></a></div><div class=card-footer><span class=float-start>Wednesday, August 11, 2021
</span><a href=/posts/dotnet/deploy-ubuntu2004-nginx/ubuntu2004_nginx/ class="float-end btn btn-outline-info btn-sm">Read</a></div></div></div><div class=post-card><div class=card><div class=card-head><a href=/posts/dotnet/snippet-json-dt/ class=post-card-link><img class=card-img-top src=/images/default-hero.jpg alt="Hero Image"></a></div><div class=card-body><a href=/posts/dotnet/snippet-json-dt/ class=post-card-link><h5 class=card-title>[.NET] JsonDocument 與 DataTable 的互相轉換</h5><p class="card-text post-summary">在 LINQ 當道的時代雖然 DataTable 比較少用了，但還是難免會碰到， 下面紀錄如何在.NET Core 裡面把 DataTable 的資料轉成 JsonElement，
public JsonElement jsonFromDataTable(DataTable dt) { using (var stream = new MemoryStream()) { using (var writer = new Utf8JsonWriter(stream)) { // 起始一個裝 JElement 的陣列 writer.WriteStartArray(); foreach (DataRow row in dt.Rows) { // 開始寫入每個 Row 各自對應的 JElement 寫入程序 writer.WriteStartObject(); foreach (DataColumn column in row.Table.Columns) { // 先寫入屬性名稱 writer.WritePropertyName(column.ColumnName); // 判斷欄位值是否為 DBNull 來寫入值或 Null if (row[column.ColumnName] == DBNull.Value) writer.WriteNullValue(); else JsonSerializer.Serialize(writer, row[column]); } // 結束一列資料對應的 JElement 寫入程序 writer.WriteEndObject(); } // 結束整個陣列的寫入 writer.WriteEndArray(); } // 最後 Stream 讀取的資料會寫成 JsonDocument 的 RootElement return JsonDocument.Parse( stream.ToArray() ).RootElement; } } 使用方式：</p></a></div><div class=card-footer><span class=float-start>Friday, August 6, 2021
</span><a href=/posts/dotnet/snippet-json-dt/ class="float-end btn btn-outline-info btn-sm">Read</a></div></div></div></div><div class=paginator><ul class="pagination pagination-default"><li class=page-item><a href=/posts/ aria-label=First class=page-link role=button><span aria-hidden=true>&#171;&#171;</span></a></li><li class=page-item><a href=/posts/page/3/ aria-label=Previous class=page-link role=button><span aria-hidden=true>&#171;</span></a></li><li class=page-item><a href=/posts/page/2/ aria-label="Page 2" class=page-link role=button>2</a></li><li class=page-item><a href=/posts/page/3/ aria-label="Page 3" class=page-link role=button>3</a></li><li class="page-item active"><a aria-current=page aria-label="Page 4" class=page-link role=button>4</a></li><li class=page-item><a href=/posts/page/5/ aria-label="Page 5" class=page-link role=button>5</a></li><li class=page-item><a href=/posts/page/6/ aria-label="Page 6" class=page-link role=button>6</a></li><li class=page-item><a href=/posts/page/5/ aria-label=Next class=page-link role=button><span aria-hidden=true>&#187;</span></a></li><li class=page-item><a href=/posts/page/7/ aria-label=Last class=page-link role=button><span aria-hidden=true>&#187;&#187;</span></a></li></ul></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-start"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=https://blog.tigernaxo.com/#about>About</a></li><li class=nav-item><a class=smooth-scroll href=https://blog.tigernaxo.com/#skills>Skills</a></li><li class=nav-item><a class=smooth-scroll href=https://blog.tigernaxo.com/#experiences>Experiences</a></li><li class=nav-item><a class=smooth-scroll href=https://blog.tigernaxo.com/#education>Education</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><a href=mailto:ycc@tigernaxo.com target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>ycc@tigernaxo.com</span></a></li><li><a href=https://github.com/tigernaxoJr target=_blank rel=noopener><span><i class="fab fa-github"></i></span> <span>tigernaxoJr</span></a></li><li><a href=https://www.linkedin.com/in/%e8%ad%bd%e6%99%9f-%e9%99%b3-41464a132 target=_blank rel=noopener><span><i class="fab fa-linkedin"></i></span> <span>Chen Yu Cheng</span></a></li><li><a href=tel:+886919681059 target=_blank rel=noopener><span><i class="fas fa-phone-alt"></i></span> <span>+886919681059</span></a></li></ul></div><div class="col-md-4 col-sm-12"><p>Stay up to date with email notification</p><form method=post action=https://blogtrottr.com><div class=form-group><input type=email class=form-control name=btr_email placeholder="Enter email"><br><input type=hidden name=btr_url value=https://blog.tigernaxo.com//index.xml>
<input type=hidden name=schedule_type value=1>
<small id=emailHelp class="form-text text-muted">By entering your email address, you agree to receive the newsletter of this website.</small>
<button type=submit class="btn btn-info"> Submit</button></div></form></div></div></div><hr><div class=container><div class="row text-start"><div class=col-md-4><a id=theme href=https://github.com/hugo-toha/toha target=_blank rel=noopener><img src=/images/theme-logo_hu_b3360284c55cf72d.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">© 2020 Copyright.</div><div class="col-md-4 text-end"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/application.22babcef24279791b6f32a01a1f1cb863ef9ef9bc7102ea30d65299e2250e52e.js integrity="sha256-Irq87yQnl5G28yoBofHLhj7575vHEC6jDWUpniJQ5S4=" defer></script></body></html>